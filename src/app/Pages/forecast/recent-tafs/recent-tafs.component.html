<ion-content>
  <app-loading *ngIf="loading"></app-loading>

  <app-package-content>
    <app-package-header> Recent TAFs </app-package-header>

    <app-package-sub-header>
      <div
        id="w-node-e7ec9294-4182-a125-c428-84c8c81f6e70-5aa24fea"
        class="w-layout-grid grid-cct-copy"
      >
        <div
          id="w-node-_211f6e7f-4ab3-965d-1518-9c1f84dfceec-5aa24fea"
          class="cct"
        >
          <h1 class="heading-7">Date:</h1>
          <h1 class="heading-7">{{ currentDate }}</h1>
        </div>
        <div
          id="w-node-_2ef88a37-3b9e-7fec-658a-a6f84d594d57-5aa24fea"
          class="cct"
        >
          <h1 class="heading-7">Time:</h1>
          <h1 class="heading-7">{{ currentTime }}</h1>
        </div>
      </div>

      <div class="w-form">
        
        <form
          id="email-form-3"
          name="email-form-3"
          data-name="Email Form 3"
          method="get"
          class="stacked-form"
          data-wf-page-id="65c0c298a377a85c9377a649"
          data-wf-element-id="f1b8684b-0b39-7e93-2135-f1650deadc75"
        >
          <label for="field-2" class="field-label">Template Name</label>
          <input
            class="text-field w-input"
            maxlength="256"
            name="field-2"
            data-name="Field 2"
            placeholder=""
            type="text"
            required=""
          />
        </form>

        <form
          action="/search"
          class="search w-form"
          (submit)="onSearch($event)"
        >
          <input
            class="search-input w-input"
            maxlength="256"
            name="query"
            placeholder="Searchâ€¦"
            type="text"
            id="search"
            [(ngModel)]="searchQuery"
            (ngModelChange)="filterTafs()"
            required=""
          />
          <input
            (click)="filterTafs()"
            type="submit"
            class="search-button w-button"
            value="Search"
          />
        </form>
       <div class="checkbox-field">
  <label class="custom-checkbox">
    <input
      type="checkbox"
      [(ngModel)]="includeSigmets"
      name="includeSigmets"
      (change)="filterTafs()"
    />
    <span class="checkmark"></span>
    Include SIGMETs
  </label>
</div>




      </div>

      <div class="w-form">
        <form
          id="email-form-3"
          name="email-form-3"
          data-name="Email Form 3"
          method="get"
          class="stacked-form"
          data-wf-page-id="65c0c298a377a85c9377a649"
          data-wf-element-id="f1b8684b-0b39-7e93-2135-f1650deadc75"
        >
          <!-- Time Dropdown -->
          <div class="dropdown-item">
            <label for="" class="field-label">Time</label>
            <div class="dropdown-container">
              <div
                data-hover="false"
                data-delay="0"
                class="text-field-blue w-dropdown"
                id="selct"
                (click)="forecastDropdown('dropdown2')"
              >
                <div class="w-dropdown-toggle">
                  <div class="dropdown-header">
                    <div class="text-block">{{ selectedOption2 }}</div>
                    <ion-icon
                      name="chevron-down-outline"
                      id="dropdown-icon"
                      [class.rotate]="isDropdownOpen2"
                    ></ion-icon>
                  </div>
                </div>
                  <nav class="dropdown-list1" *ngIf="isDropdownOpen2">
        <a class="w-dropdown-link" (click)="selectOption('Most Recent', 'dropdown2', $event)">Most Recent</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 1 hour', 'dropdown2', $event)">Last 1 hour</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 2 hours', 'dropdown2', $event)">Last 2 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 3 hours', 'dropdown2', $event)">Last 3 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 4 hours', 'dropdown2', $event)">Last 4 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 5 hours', 'dropdown2', $event)">Last 5 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 6 hours', 'dropdown2', $event)">Last 6 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 12 hours', 'dropdown2', $event)">Last 12 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 18 hours', 'dropdown2', $event)">Last 18 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 24 hours', 'dropdown2', $event)">Last 24 hours</a>
        <a class="w-dropdown-link" (click)="selectOption('Last 36 hours', 'dropdown2', $event)">Last 36 hours</a>
      </nav>
              </div>
            </div>
          </div>
       <div></div>
        <div></div>
          <!-- Refresh Dropdown -->
          <div class="dropdown-item">
            <label for="" class="field-label">Refresh This page every</label>
            <div class="dropdown-container">
              <div
                data-hover="false"
                data-delay="0"
                class="text-field-blue w-dropdown"
                id="selct"
                (click)="forecastDropdown('dropdown3')"
              >
                <div class="w-dropdown-toggle">
                  <div class="dropdown-header">
                    <div class="text-block">{{ selectedOption3 }}</div>
                    <ion-icon
                      name="chevron-down-outline"
                      id="dropdown-icon"
                      [class.rotate]="isDropdownOpen3"
                    ></ion-icon>
                  </div>
                </div>
                <nav class="dropdown-list1" *ngIf="isDropdownOpen3">
                  <a
                    class="w-dropdown-link"
                    (click)="selectOption('1 min', 'dropdown3', $event)"
                    >1 min</a
                  >
                  <a
                    class="w-dropdown-link"
                    (click)="selectOption('2 min', 'dropdown3', $event)"
                    >2 Min</a
                  >
                  <a
                    class="w-dropdown-link"
                    (click)="selectOption('3 min', 'dropdown3', $event)"
                    >3 min</a
                  >
                  <a
                    class="w-dropdown-link"
                    (click)="selectOption('4 min', 'dropdown3', $event)"
                    >4 min</a
                  >
                  <a
                    class="w-dropdown-link"
                    (click)="selectOption('5 min', 'dropdown3', $event)"
                    >5 min</a
                  >
                </nav>
              </div>
            </div>
          </div>
        </form>
      </div>
    </app-package-sub-header>

    <app-package-list-items>
      
       <div
        id="w-node-_5f88f6f6-8fce-d572-7c6f-63acb9f1cb43-61ad4633"
        class="div-block-15" *ngIf="searchDone && includeSigmets"
      >
      <h1 class="heading-21 searched">SIGMETs</h1>
        <div *ngFor="let sigmet of (searchDone ? filteredSigmetList : SigmetList)">
          <!-- <div class="w-layout-grid heading-text">
            <div
              id="w-node-_5f88f6f6-8fce-d572-7c6f-63acb9f1cb50-61ad4633"
              class="cct-copy-copy"
            >
              <h1 class="heading-21">{{ sigmet.heading }}</h1>
            </div>
          </div> -->
          <div class="w-layout-grid grid-18">
            <div
              id="w-node-_5f88f6f6-8fce-d572-7c6f-63acb9f1cb57-61ad4633"
              class="div-block-16"
            >
              <p class="paragraph-2  sigmet-text" [innerHTML]="formatSigmetForDisplay(sigmet.filecontent)"></p>

            </div>
        
          </div>
        </div>
      </div>
      <div  *ngIf="searchDone">
            <h1 class="heading-21 searched">TAFs</h1>
      <div  *ngFor="let province of objectKeys(searchDone ? filteredGroupedTAFs : groupedTAFs)" class="div-block-15" [attr.id]="province">
    <h1 class="heading-22">  {{ getAirportHeading(searchDone ? filteredGroupedTAFs[province][0] : groupedTAFs[province][0]) }}</h1>
      <div class="div-block-32">
        <div class="w-layout-grid ccta-grid">
           <div class="button w-button" (click)="toggleView(province)">
      {{ viewModes[province] === 'normal' ? 'Normal' : 'Color Coded' }}
    </div>

          <div class="cct-copy" >
            <div class="button-2 w-button" (click)="ViewColorCodedStyle()">Colour / Style Index</div>
          </div>
        </div>
      </div>

   <!-- Color Coded View -->
<div *ngIf="viewModes[province] === 'color'" class="w-layout-grid heading-text">
  
<div *ngIf="viewModes[province] === 'color'" class="taf-list">
  <div *ngFor="let taf of (searchDone ? filteredGroupedTAFs[province] : groupedTAFs[province])" class="taf-row">
    <h1 class="heading-21">{{ taf }}</h1>
    <div class="cct-copy"  *ngIf="!taf.startsWith('No data for')">
      <div class="button-2-copy w-button" *ngIf="taf" (click)="ImageViewer(taf)">View Decoded</div>
    </div>
  </div>
</div>


</div>

<!-- Normal View -->

<div *ngIf="viewModes[province] === 'normal'" class="w-layout-grid grid-18">
  <div class="div-block-16">
    <div *ngFor="let taf of (searchDone ? filteredGroupedTAFs[province] : groupedTAFs[province])" class="taf-row">
      <h3 class="heading-21 nocolor">{{ taf }}</h3>

      <div class="cct-copy" *ngIf="!taf.startsWith('No data for')">
        <button
          class="button-2-copy w-button"
          *ngIf="taf"
          (click)="ImageViewer(taf)">
          View Decoded
        </button>
      </div>
    </div>
  </div>

  <div class="div-block-17"></div>
</div>
  </div>
      </div>
  
    </app-package-list-items>
  </app-package-content>
</ion-content>

<app-footer *ngIf="!isKeyboardVisible"></app-footer>

<div class="footerdiv" id="footerdivid1" *ngIf="!isKeyboardVisible">
  <div (click)="forecastPageNavigation()" class="link-block-5 w-inline-block">
    <img src="../../assets/Group-4522.svg" loading="lazy" alt="" />
    <h6
      class="heading-10-copy"
      id="styleh6"
      style="
        color: #fff;
        margin-top: 10px;
        margin-bottom: 0;
        font-family: Montserrat, sans-serif;
        text-decoration: none;
        font-size: 12px;
        margin-top: 4px;
      "
    >
      Forecast
    </h6>
  </div>
</div>

<button
  *ngIf="!isKeyboardVisible"
  (click)="ScrollToTop('top')"
  id="btntotop"
  title="Go to top"
>
  Top
</button>
